<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<match spring.logs>
  @type elasticsearch
  host localhost
  port 9200
  scheme https
  user elastic
  password YbBdWCNYrZ23k5PNxt39
  
  logstash_format true
  include_tag_key true
  tag_key @log_name

  ssl_verify true
  ca_file "D:/elasticsearch-9.1.2/config/certs/http_ca.crt"

  # Connection management
  reload_connections true
  reload_on_failure true
  reconnect_on_error true

  # Failover & retry behavior
  request_timeout 30s
  max_retry_wait 60
  disable_retry_limit false
  
  versioned_content_type true   # <-- this forces Content-Type to match Accept with compatible version


  # Buffer settings
  <buffer>
    @type memory
    flush_interval 5s
    chunk_limit_size 5MB
    retry_max_interval 30
    retry_forever true
  </buffer>
</match>